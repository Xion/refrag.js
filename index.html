<!DOCTYPE html>
<html>
	<head>
		<title>refrag.js :: breathing new life into URL hashes</title>
		<link rel="stylesheet/less" type="text/css" href="css/style.less"/>

		<script type="text/javascript" src="js/less-1.1.5.min.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

		<script type="text/javascript">
			// replacing &tab; "entity refs" with <span> that simulates indentation
			$(document).ready(function() {
				$('div#page > code').each(function() {
					var $this = $(this);
					$this.html($this.html().replace(/&amp;tab;/g, "<span class='indent'></span>"));
				});
			});
		</script>
	</head>
	<body>
		<a href="http://github.com/Xion/refrag.js">
			<img id="github_corner" alt="Fork me on GitHub" src="img/github-forkme-corner.png"/>
		</a>

		<div id="page">
			<header>
				<div id="title">refrag.js</div>
				<div id="slogan">breathing new life into URL hashes</div>
			</header>

			<p>Do you remember why the <strong>hash sign</strong> (<code>#</code>) was being put into URLs?...</p>
			<p>No, it wasn't "<a href="http://www.w3.org/QA/2011/05/hash_uris.html">because of AJAX</a>".<br/>
			Not for <a href="http://www.google.com/analytics">Google Analytics</a> either.</p>
			<p>Hash was followed by a <em>fragment identifier</em>. It referred to <strong>portion</strong> of document.<br/>
			If you opened the URL, you were taken directly to this portion.</p>
			<p>No scrolling, no searching. Right to the point.</p>

			<h2>So, what happened?</h2>
			<p>On the target side, supporting fragment identifiers was cumbersome. It required placement of
			<em>anchors</em> - such as <code>&lt;a name="foo"/&gt;</code> - for fragments we wanted links to.
			That was an additional effort which was often non-trivial.</p>
			<p>But even if the author undertook this effort, results were hardly impressive. You could still only
			link to fragments that had anchors placed - usually headers or sections. What if you wanted more granularity, like
			paragraphs or sentences?...</p>
			<p>If the anchor wasn't there - well, tough luck.</p>

			<h2>Reviving the hash</h2>
			<p>It's no wonder that the original idea of URL hash fragments has mostly died out. But it doesn't mean
			we no longer need linking to portions of websites. Quite the opposite, actually. As more and more articles and blogposts
			are getting published on the Web, this need becomes even more nagging.</p>

			<p>It's a problem, but a one that can and should be solved.</p>
			<p>Hence, the <em>Refrag</em> project.</p>

			<h2>The idea</h2>
			<p><em>Refrag</em> gets away with the idea of explicit anchors. Instead, it utilizes existing content of page:
			markup and text. Since this wealth of information and structure is already there, the only thing missing is
			some way of referring to it.<br/>
			For that, <em>Refrag</em> uses a special form of fragment identifier: one that starts with caret sign
			(<code>^</code>) right after the hash (<code>#</code>). This results in URL similar to:</p>
			<code>http://www.example.com/article/456#^text%20within%20article</code>
			<p>The text after <code>#^</code> hashbang is a content locator, pointing to a fragment of document.
			In this example, it can be just a text occurring somewhere on the page. Typing such URL in a browser
			should result in loading the desired page and scrolling down to the first occurrence of specified text.</p>

			<h2>How does it work?</h2>
			<p><em>refrag.js</em> implements this mechanism as a drop-in JS script. The script can be painlessly included within a website, making it a potential target for <code>#^</code> links:</p>
			<code>&lt;script type="text/javascript" src="refrag.min.js">&lt;/script></code>
			<p>When the page is loaded, <em>refrag.js</em> will inspect the URL and search for a hash-caret sequence.
			If it's present, it'll take the user to the appropriate page fragment.</p>
		</div>
	</body>
</html>