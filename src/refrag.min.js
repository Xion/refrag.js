(function(a){var b="^";var c=function(a,b){var c,d;if(typeof b==="undefined"){c="log";d=a}else{c=a;d=b}console[c]("[refrag.js] "+d)};var d="#"+b;var e=window.location.hash;if(e.substr(0,d.length)!==d)return;e=e.substr(d.length);c("Anchor `"+e+"` found, will redirect...");a(function(){c("Attempting to redirect...");e=unescape(e);var a=f(e);if(a){c("Matched element <"+a.nodeName+">");var b=g(e,a);var d=b||a;d.scrollIntoView()}else{c("warn","No element matching anchor: "+e)}});var f=function(){var b=function(c,d,e){var f=null;var g=function(b){b=b||"";return function(){if(f)return false;var d=a(this);var e=d.innerText();var h=b+e;if(h.indexOf(c)>=0){f=d;return false}a.each(d.contents(),g(h))}};d=d||a("body");a.each(d.contents(),g());if(!f){if(e)return null;g().apply(d);return f}return b(c,f,true)||f};return function(a){return b(a)}}();var g=function(){var b=function(b){var c=[];var d=[];d.push(b);while(d.length>0){var e=a(d.pop());if(e.isText())c.push(e);else{a.each(e.contents(),function(){d.push(this)})}}return c.reverse()};var c=function(a,c){var d=a.innerText();var e=b(a);var f=d.indexOf(c);var g,h=-1;var i=0;var j;for(var k=0;k<e.length;++k){var l=e[k].innerText();i+=l.length;if(i>=f){g=k;j=f-(i-l.length);if(i>=f+c.length)h=k;break}}if(h<0)for(var k=g+1;k<e.length;++k){var l=e[k].innerText();i+=l.length;if(i>=f+c.length){h=k;break}}i=0;f=j;var m=[];for(var k=g;k<=h;++k){var n=e[k];var o={node:n};o.offset=k==g?f:0;o.length=k==h?c.length-(i-f):n.innerText().length;m.push(o);i+=o.length}return m};var d=function(b,c,d,e){e=e||"span";var f=b.innerText();var g;if(typeof c==="string"){g=c;c=f.indexOf(g);d=c+g.length}else g=f.substring(c,d);var h=a(document.createTextNode(f.substring(0,c)));var i=a(document.createTextNode(f.substring(d)));var j=a("<"+e+"/>").html(g);var k=a("<"+e+"/>");k.append(h).append(j).append(i);b.replaceWith(k);return j};return function(a,b){var e=[];var f;if(b.isText()){var g={node:b,offset:b.innerText().indexOf(a),length:a.length};f=[g]}else f=c(b,a);for(var h=0;h<f.length;++h){var g=f[h];var i=g.offset,j=g.offset+g.length;var k=d(g.node,i,j);e.push(k)}for(var l in e)e[l].css("background-color","yellow");return e.length>0?e[0]:null}}()})(function(){var a=function(b){var c=function(a){if(a[0]=="#"){var b=a.substring(1);var c=document.getElementById(b);if(!c)return null;return e(c)}if(document.querySelector)return e(document.querySelector(a));return null};var d=function(a){a=a.substr(1,a.length-2);if(a[a.length-1]=="/")a=a.substr(0,a.length-1);var b=document.createElement(a);return e(b)};var e=function(b){for(var c in a.fn){if(a.fn.hasOwnProperty(c)&&typeof b[c]==="undefined"){var d=a.fn[c];b[c]=d}}return b};var f=function(a){if(window.addEventListener)return window.addEventListener("load",a);else{window.onload=a;return true}};if(typeof b==="string"){b=b.trim();if(b[0]=="<"&&b[b.length-1]==">")return d(b);return c(b)}if(typeof b==="function"){return f(b)}return e(b)};a.fn=function(){var b=function(a){var b=a.split("-");for(var c=0;c<b.length;++c){var d=b[c].substring(0,1);d=d[c>0?"toUpperCase":"toLowerCase"]();b[c]=d+b[c].substring(1)}return b.join("")};return{isText:function(){return this.nodeType==3},parent:function(){return a(this.parentNode)},contents:function(){return this.childNodes},html:function(a){if(typeof a!=="undefined"){this.innerHTML=a;return this}return this.innerHTML},innerText:function(){if(this.isText())return this.nodeValue;var b="";var c=this.childNodes;a.each(c,function(){b+=a(this).innerText()});return b},css:function(a,c){a=b(a);if(typeof c!=="undefined"){this.style[a]=c;return this}return this.style[a]},offset:function(){var a=top=0;if(b.offsetParent){var b=this;do{a+=b.offsetLeft;top+=b.offsetTop}while(b=b.offsetParent)}return{left:a,top:top}},scrollIntoView:function(b){var c=this;while(c&&c.nodeType!=1)c=c.previousSibling;c=c||this.parentNode;if(c)a(c).scrollIntoView(b)},append:function(a){this.appendChild(a);return this},replaceWith:function(a){var b=this.parentNode;b.insertBefore(a,this);b.removeChild(this);return this}}}();a.each=function(a,b){for(var c in a){if(a.hasOwnProperty(c)){var d=a[c];var e=b.apply(d,[c,d,a]);if(e===false)break}}};return a}())